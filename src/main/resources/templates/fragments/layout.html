<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<th:block th:fragment="layout (title, content)">

    <head>
        <title th:text="${title}">Todo Web App</title>
        <th:block th:replace="~{fragments/header :: header}"></th:block>
    </head>

    <body class="bg-background-dark min-h-screen flex text-text-light font-sans">

    <div class="w-64 bg-card-dark p-6 flex flex-col justify-between shadow-xl">
        <div>
            <div class="text-2xl font-bold mb-10 text-primary-green">
                Todo Web App
            </div>

            <nav class="space-y-3">
                <a href="/todos" class="flex items-center p-3 rounded-xl transition duration-200"
                   th:classappend="${#httpServletRequest?.requestURI?.startsWith('/todos')} ? 'bg-background-dark text-white' : 'hover:bg-background-dark text-text-secondary'">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/></svg>
                    <span class="font-medium">My Tasks</span>
                </a>
            </nav>
        </div>

        <div th:if="${loggedIn}" class="mt-8">
            <a th:href="@{/logout}" class="flex items-center p-3 rounded-xl hover:bg-background-dark text-red-400 transition duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                <span class="font-medium">Logout</span>
            </a>
        </div>
        <div th:if="${!loggedIn}" class="mt-8 space-y-3">
            <a th:href="@{/login}" class="block text-center p-2 rounded-lg bg-blue-600 hover:bg-blue-700 font-medium transition">Login</a>
            <a th:href="@{/register}" class="block text-center p-2 rounded-lg border border-gray-600 hover:bg-card-dark font-medium transition">Register</a>
        </div>

    </div>

    <div class="flex-1 overflow-y-auto p-8">
        <th:block th:replace="~{fragments/navbar :: navbar}"></th:block>

        <main class="mt-8">
            <th:block th:replace="${content}"></th:block>
        </main>
    </div>

    </body>

</th:block>

</html>